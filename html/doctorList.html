<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
    <title>相关医生</title>
    <link rel="stylesheet" href="../statics/css/allWap.css">
</head>
<body >
    <div class="top">
        <em>
            <img src="../statics/img/enter.png" alt="">
        </em>
        <span>相关医生</span>
    </div>
    <div class="container3 relative_doc marTop5">
        <!--<dl class="dL">-->
            <!--<dt><img src="../statics/img/1.jpg" alt=""></dt>-->
            <!--<dd><strong>徐毅飞</strong>&nbsp;&nbsp;-->
                <!--<span>副主任医师</span>&nbsp;&nbsp;-->
                <!--<span>儿科</span>&nbsp;&nbsp;&nbsp;&nbsp; <span>教授</span>-->
                <!--<p class="hospitalName">北京儿童医院</p>-->
            <!--</dd>-->
            <!--<dd>-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/gray.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
                <!--<span>问诊量200</span>-->
            <!--</dd>-->
            <!--<dd><a href="#">擅长:</a>&nbsp;&nbsp;-->
                <!--<span>妇科疾病</span>&nbsp;&nbsp;-->
                <!--<span>扣钱贵阳</span>&nbsp;&nbsp;-->
                <!--<span>糖尿病</span>&nbsp;&nbsp;-->
            <!--</dd>-->
        <!--</dl>-->
        <!--<dl class="dL">-->
            <!--<dt><img src="../statics/img/1.jpg" alt=""></dt>-->
            <!--<dd><strong>徐毅飞</strong>&nbsp;&nbsp;-->
                <!--<span>副主任医师</span>&nbsp;&nbsp;-->
                <!--<span>儿科</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>北京儿童医院</span>-->
            <!--</dd>-->
            <!--<dd>-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/yellow.png" alt="">-->
                <!--<img src="../statics/img/gray.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
                <!--<span>问诊量200</span>-->
            <!--</dd>-->
            <!--<dd><a href="#">擅长:</a>&nbsp;&nbsp;-->
                <!--<span>妇科疾病</span>&nbsp;&nbsp;-->
                <!--<span>扣钱贵阳</span>&nbsp;&nbsp;-->
                <!--<span>糖尿病</span>&nbsp;&nbsp;-->
            <!--</dd>-->
        <!--</dl>-->
    </div>
    <p id="more_readoc" class="no_more"></p>
    <h3 class="no_more" id="no_readoc"></h3>
    <footer>
        <div class="footer">
            <p>
                <em id="logo"></em><br>
                值得信赖的互联网医院
            </p>
        </div>
    </footer>
</body>

<script src="../statics/js/common/zepto.min.js"></script>
<!--<script src="../statics/js/common/baidu_template.js" type="text/javascript"></script>-->
<script src="../statics/js/common/basic.js"></script>
<script src="../statics/js/xyfpublic/xyfpublic.js"></script>

<script type="text/javascript">
    (function(window,undefined){
        //测试数据
//        var patientToken='ef73b0ef1b2c4512a7951e2b50a4ebcf2b154627c8fee4614aae4989795cfb1b0';
//        var searchvalue='李';
        //正式的数据
        var patientToken=localStorage.getItem('userToken');
        var searchvalue=localStorage.getItem('searchvalue');
        function doctorList(data){
            for(var i=0;i<data.length;i++){
                var html='';
                var dataCircle=data[i];
                html+='<dl class="dL" data-id="'+data[i].docId+'">';
                if(data[i].image==''){
                    html+=' <dt><img src="../statics/img/1.jpg" alt=""></dt>';
                }else{
                    html+=' <dt><img src="'+data[i].image+'" alt=""></dt>';
                }
                html+='<dd><strong>'+data[i].name+'</strong>&nbsp;&nbsp;';
                if(data[i].title!=null&&data[i].title!=''){
                    html+='<span>'+data[i].title+'</span>&nbsp;&nbsp;';
                }
                html+='<span>'+data[i].department+'</span>&nbsp;&nbsp;';
                if(data[i].educationTitle!=''&&data[i].educationTitle!=null){
                    html+= '<span>'+data[i].educationTitle+'</span>'
                }
                html+='<p class="hospitalName">'+data[i].hospital+'</p>';
                html+=' </dd>';
                html+=' <dd>';
                if(Math.ceil(data[i].score)==1){
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                    return html;
                }else if(Math.ceil(data[i].score)==2){
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                }else if(Math.ceil(data[i].score)==3){
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                }else if(Math.ceil(data[i].score)==4){
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/gray.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                }else if(Math.ceil(data[i].score)==5){
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">';
                    html+='<img src="../statics/img/yellow.png" alt="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                }
                html+='<span>问诊量'+data[i].askCount+'</span>';
                html+='</dd>';
                html+='<dd>';
                html+='<em>擅长:</em>&nbsp;&nbsp;';
                html+='<span>'+data[i].good+'</span>&nbsp;&nbsp;';
                $('.container3').append(html)
            }
        }
        var doctorNum=1;
        var doctorSize=6;
        loadPagedoc(doctorNum,doctorSize);
        //所有相关医生的列表
        function loadPagedoc(page,size){
            $.ajax({
                type:'get',
                url: insuranceListUrl(page,size),
                data:{
                    'searchkey':localStorage.getItem('searchvalue')
                },
                success:function(data){
                    console.log(data)
                    if(data.result.code==0){
                        doctorList(data.docs);
                        if(data.count<=page*size){
                            $('#no_readoc').html('没有更多了');
                            $('#more_readoc').html('');
                        }else{
                            $('#more_readoc').html('查看更多医生');
                            $('#no_readoc').html('');
                            doctorNum++;
                        }
                    }else{
                        alert('数据加载异常')
                    }
                }
            });
        }
        function insuranceListUrl(page,size,sort){
            return  window.YLZ.base+'pat/docs?searchkey='+searchvalue+'&token='+patientToken+'&page='+page+'&size='+size;
        }
        console.log( window.YLZ.base+'pat/docs?token='+patientToken);
        $('#more_readoc').on('click',function(){
            loadPagedoc(doctorNum,doctorSize);
        })
    })(window);
</script>
</html>